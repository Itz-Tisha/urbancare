@{
    var role = ViewBag.Role as string;
    ViewData["Title"] = "Home - " + role;
}

<h2>Welcome to UrbanCare (@role)</h2>

@if (role == "Citizen")
{
    var user = Model as urbancare_final.Models.User;

    <h3>Hello, @user.Name</h3>
    <p>Email: @user.Email</p>

    <h4>Your Complaints</h4>
    <ul>
        @if (user.Problems != null && user.Problems.Any())
        {
            foreach (var p in user.Problems)
            {
                <li>@p.Statement</li>
            }
        }
        else
        {
            <li>No complaints yet.</li>
        }
    </ul>

    <h4>Your Resolutions</h4>
    <ul>
        @if (user.Resolutions != null && user.Resolutions.Any())
        {
            foreach (var r in user.Resolutions)
            {
                <li>@r.Response</li>
            }
        }
        else
        {
            <li>No resolutions yet.</li>
        }
    </ul>
}
else if (role == "Department")
{
    var dept = Model as urbancare_final.Models.Department;

    <p><strong>Department Name:</strong> @Model.Department.DepartmentMaster?.Name</p>
    <p>Username: @dept.user_Name</p>
    <p>City: @dept.City</p>
    <p>ZipCode: @dept.ZipCode</p>

    <h4>Assigned Problems</h4>
    <ul>
        @if (dept.Problems != null && dept.Problems.Any())
        {
            foreach (var p in dept.Problems)
            {
                <li>@p.Statement</li>
            }
        }
        else
        {
            <li>No problems assigned.</li>
        }
    </ul>

    <h4>Resolutions</h4>
    <ul>
        @if (dept.Resolutions != null && dept.Resolutions.Any())
        {
            foreach (var r in dept.Resolutions)
            {
                <li>@r.Response</li>
            }
        }
        else
        {
            <li>No resolutions yet.</li>
        }
    </ul>
}
